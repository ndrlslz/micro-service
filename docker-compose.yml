version: '2'
services:
    eureka-server:
        image: eureka-server
        container_name: eureka-server-container
        ports:
            - "8761:8761"
    eureka-client:
        image: eureka-client
        container_name: eureka-client-container
        depends_on:
            - "eureka-server"
        ports:
            - "8762:8762"
        command: ["/apps/wait-for-it.sh", "eureka-server:8761", "--", "/bin/sh", "./run.sh" ]
    service-order:
        image: service-order
        container_name: service-order-container
        depends_on:
            - "eureka-server"
        ports:
            - "8763:8763"
        command: ["/apps/wait-for-it.sh", "eureka-server:8761", "--", "/bin/sh", "./run.sh" ]
    service-vehicle:
        image: service-vehicle
        container_name: service-vehicle-container
        depends_on:
            - "eureka-server"
        ports:
            - "8764:8764"
        command: ["/apps/wait-for-it.sh", "eureka-server:8761", "--", "/bin/sh", "./run.sh" ]
networks:
    default:
        external:
            name: microservice
